---
layout: post
title: 자바 ORM 표준 JPA 프로그래밍 - JPA 소개
categories: [Study, JPA]
tags: [JPA, ORM]
---

# Table of Contents

1.  [JPA 소개](#org2032581)
    1.  [SQL을 직접 다룰 때 발생하는 문제점](#org2d5500f)
        1.  [반복, 반복 그리고 반복](#orge916069)
        2.  [SQL에 의존적인 개발](#org59453cf)
    2.  [패러다임의 불일치](#orga8f10a3)
    3.  [JPA란 무엇인가?](#orgee228b1)
        1.  [JAP 소개](#org9fdfc5e)
        2.  [왜 JPA를 사용해야 하는가?](#org932d0db)


<a id="org2032581"></a>

# JPA 소개


<a id="org2d5500f"></a>

## SQL을 직접 다룰 때 발생하는 문제점


<a id="orge916069"></a>

### 반복, 반복 그리고 반복

객체를 DB에 CRUD하려면 너무 많은 SQL과 JDBC API를 코드로 작성해야 한다.  
그리고 테이블마다 이런 비슷한 일을 반복해야 하는데, 개발하려는 애플리케이션에서 사용하는 데이터베이스 테이블이 100개라면 무수히 많은 SQL을 작성해야 하는 이런 비슷한 일을 100번은 더 반복해야 한다.  


<a id="org59453cf"></a>

### SQL에 의존적인 개발

물리적으로 SQL과 JDBC API를 데이터 접근 계층에 숨기는 데 성공했을지는 몰라도 논리적으로 엔티티와 아주 강한 의존관계를 가지고 있다.  
일너 강한 의존관계 때문에 회원을 조회할 때는 물론이고 회원 객체에 필드를 하나 추가할 때도 DAO의 CRUD 코드와 SQL 대부분을 변경해야 하는 문제가 발생한다.  

-   진정한 의미의 계층 분할이 어렵다.
-   엔티티를 신뢰할 수 없다.
-   SQL에 의존적인 개발을 피하기 어렵다.


<a id="orga8f10a3"></a>

## 패러다임의 불일치

애플리케이션은 자바라는 객체지향 언어로 개발하고 데이터는 관계형 데이터베이스에 저장해야 한다면, 패터다임의 불일치 문제를 개발자가 중간에서 해결해야 한다.  
문제는 이런 객체와 관계형 데이터베이스 사이의 패러다임 불일치 문제를 해결하는 데 너무 많은 시간과 코드를 소비하는 데 있다.  

객체 모델과 관계형 데이터베이스 모델은 지향하는 패러다임이 서로 다르다.  
문제는 이 패러다임의 차이를 극복하려고 개발자가 너무 많은 시간과 코드를 소비한다는 점이다.  

더 어려운 문제는 객체지향 애플리케이션답게 정교한 객체 모델링을 할수록 패러다임의 불일치 문제가 더 커진다는 점이다.  
이 틈을 메우기 위해 개발자가 소모해야 하는 비용도 점점 더 많아진다.  
결국, 객체 모델링은 힘을 잃고 점점 데이터 중심의 모델로 변해간다.  

JPA는 패러다임의 불일치 문제를 해결해주고 정교한 객체 모델링을 유지하게 도와준다.  


<a id="orgee228b1"></a>

## JPA란 무엇인가?

JPA(Java Persistence API)는 자바 진영의 ORM 기술 표준이다.  

![img](/assets/img/JPA_소개/2021-04-11_19-27-13_jpa-basic-structure.png)  
ORM이란 무엇일까? ORM(Object Relational Mapping)은 이름 그대로 객체와 관계형 데이터베이스를 매핑한다는 뜻이다.  
ORM 프레임워크는 개체와 테이블을 매핑해서 패러다임의 불일치 문제를 개발자 대신 해결해준다.  

저장의 기능을 보면 아래와 같이 ORM 프레임워크가 적절한 INSERT SQL을 생성해서 데이터베이스에 객체를 저장해준다.  

![img](/assets/img/JPA_소개/2021-04-11_19-29-46_jpa-insert-structure.png)  

    jpa.persist(member); // 저장

ORM 프레임워크는 단순히 SQL을 개발자 대신 생성해서 데이터베이스에 전달해주는 것뿐만 아니라 다양한 패러다임의 불일치 문제들도 해결해준다.  
따라서 객체 측면에서는 정교한 객체 모델링을 할 수 있고 관계형 데이터베이스는 데이터베이스에 맞도록 모델링하면 된다.  
그리고 둘을 어떻게 매핑해야 하는지 매핑 방법만 ORM 프레임워크에게 알려주면 된다.  


<a id="org9fdfc5e"></a>

### JAP 소개

EJB 3.0에서 하이버네이트를 기반으로 새로운 자바 ORM 기술 표준이 만들어졌는데 이것이 바로 JPA다.  

![img](/assets/img/JPA_소개/2021-04-11_19-35-48_.png)  
그림을 보면 JPA는 자바 ORM 기술에 대한 API 표준 명세다. 쉽게 이야기해서 인터페이스를 모아둔 것이다. 따라서 JPA를 사용하려면 JPA를 구현한 ORM 프레임워크를 선택해야 한다.  

JPA라는 표준 덕분에 특정 구현 기술에 대한 의존도를 줄일 수 있고 다른 구현 기술로 손쉽게 이동할 수 있는 장점이 있다.  


<a id="org932d0db"></a>

### 왜 JPA를 사용해야 하는가?

-   생산성  
    반복적인 코드와 CRUD용 SQL을 개발자가 직접 작성하지 않아도 된다.
-   유지보수  
    SQL을 직접 다루면 엔티티에 필드를 하나만 추가해도 관련된 CRUD SQL과 결과를 매핑하기 위한 JDBC API 코드를 모두 변경해야 했다.
-   패러다임의 불일치 해결  
    JPA는 상속, 연관관계, 객체 그래프 탐색, 비교하기와 같은 패러다임 불일치 문제를 해결해준다.
-   성능  
    JPA는 애플리케이션과 데이터베이스 사이에서 다양한 성능 최적화 기회를 제공한다.
-   데이터 접근 추상화와 벤더 독립성  
    JPA는 다음 그림처럼 애플리케이션과 데이터베이스 사이에 추상화된 데이터 접근 계층을 제공해서 애플리케이션이 특정 데이터베이스 기술에 종속되지 않도록 한다.  
    
    ![img](/assets/img/JPA_소개/2021-04-11_19-47-32_jps dialect.png)
-   표준  
    JPA는 자바 진영의 ORM 기술 표준이다. 표준을 사용하면 다른 구현 기술로 손쉽게 변경할 수 있다.

